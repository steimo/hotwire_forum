<%= turbo_frame_tag dom_id(post) do %>
  <div class="flex flex-col justify-center items-center">
    <div class="m-4 mt-4 w-9/12 sm:w-auto md:w-auto lg:w-3/4 xl:w-3/4 rounded-xl overflow-hidden shadow-lg border">
      <div class="p-4">
        <%= render "discussions/posts/header", post: post %>
        <div class="mt-4">
          <%= post.body %>
        </div>
      </div>
      <% if action_name.nil? %>
        <%#lazy load controls because it's being broadcasted %>
        <%= turbo_frame_tag "post_actions", src: discussion_post_path(post.discussion, post) do %>
          <div></div>
        <% end %>
      <% else %>
        <%= turbo_frame_tag "post_actions" do %>
          <% if Current.user == post.user || Current.user.admin? %>
            <div class="p-4 flex justify-end">
              <%= link_to "Edit", edit_discussion_post_path(post.discussion, post), data: { turbo_frame: dom_id(post) } %> |
              <%= button_to "Delete", discussion_post_path(post.discussion, post), method: :delete, form: {data: {turbo_confirm: "Are you sure ? This cannot be undone"}} %>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>
  </div>
<% end %>
